# Set the CMake version for Ivos standard (Linux mint...)
CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

# Project name
PROJECT(AutoTuxProxy)

SET (CMAKE_MODULE_PATH "/opt/od/share/cmake-2.8/Modules" ${CMAKE_MODULE_PATH})
SET (CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fPIC ${CXX_OPTIONS} -pipe -std=c++11 -lusb-1.0")

# Find OpenDaVINCI
SET(OPENDAVINCI_DIR "/opt/od")
FIND_PACKAGE (OpenDaVINCI REQUIRED)

# Find Automotivedata
SET(AUTOMOTIVEDATA_DIR "/opt/od")
FIND_PACKAGE(AutomotiveData REQUIRED)

# Find OpenCV
SET(OPENCV_ROOT_DIR "/usr")
FIND_PACKAGE(OpenCV REQUIRED)

# Set header files from OpenDaVINCI.
INCLUDE_DIRECTORIES(${OPENDAVINCI_INCLUDE_DIRS})
INCLUDE_DIRECTORIES(${LIBUSB_INCLUDE_DIR})
# Set include directory.
INCLUDE_DIRECTORIES(include)

SET(LIBRARIES ${OPENDAVINCI_LIBRARIES} ${AUTOMOTIVE_LIBRARIES} ${OPENCV_LIBRARIES} ${LIBUSB_LIBRARIES})

FILE(GLOB_RECURSE thisproject-sources "${CMAKE_CURRENT_SOURCE_DIR}/src/*/*.cpp")
ADD_LIBRARY(${PROJECT_NAME}lib-static STATIC ${thisproject-sources})
ADD_EXECUTABLE(${PROJECT_NAME} "${CMAKE_CURRENT_SOURCE_DIR}/apps/${PROJECT_NAME}.cpp")
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${PROJECT_NAME}lib-static ${LIBRARIES})